<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-commerce Cart Management</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background-color: #f2f2f2;
    }
    h1, h2 {
        color: #333;
    }
    button {
        margin: 5px 0;
        padding: 5px 10px;
        cursor: pointer;
    }
    table {
        border-collapse: collapse;
        width: 60%;
        margin-top: 10px;
        background-color: #fff;
    }
    th, td {
        border: 1px solid #333;
        padding: 8px;
        text-align: left;
    }
</style>
</head>
<body>

<h1>E-commerce Cart Management</h1>

<h2>Available Products</h2>
<table id="productTable">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
            <th>Add to Cart</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<h2>Shopping Cart</h2>
<button onclick="removeFromCart()">Remove Last Product</button>
<button onclick="checkout()">Checkout</button>
<table id="cartTable">
    <thead>
        <tr>
            <th>No.</th>
            <th>Name</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<script>
    // Product list
    const products = [
        { id: 1, name: "Laptop", price: 55000 },
        { id: 2, name: "Phone", price: 25000 },
        { id: 3, name: "Headphones", price: 3000 },
        { id: 4, name: "Mouse", price: 500 },
        { id: 5, name: "Keyboard", price: 1500 },
        { id: 6, name: "Charger", price: 1200 },
        { id: 7, name: "Tablet", price: 20000 }
    ];

    // Cart implemented as stack
    let cart = [];

    // Display products in table
    function displayProducts() {
        const tbody = document.querySelector("#productTable tbody");
        tbody.innerHTML = "";
        products.forEach(product => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${product.id}</td>
                <td>${product.name}</td>
                <td>${product.price.toFixed(2)}</td>
                <td><button onclick="addToCart(${product.id})">Add</button></td>
            `;
            tbody.appendChild(row);
        });
    }

    // Add product to cart (stack behavior)
    function addToCart(id) {
        const product = products.find(p => p.id === id);
        if (product) {
            cart.push(product);
            alert(`${product.name} added to cart`);
            displayCart();
        }
    }

    // Remove last product from cart (pop)
    function removeFromCart() {
        if (cart.length === 0) {
            alert("Cart is empty!");
            return;
        }
        const removed = cart.pop();
        alert(`${removed.name} removed from cart`);
        displayCart();
    }

    // Display cart items
    function displayCart() {
        const tbody = document.querySelector("#cartTable tbody");
        tbody.innerHTML = "";
        let total = 0;
        cart.slice().reverse().forEach((item, index) => {  // Last added first
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${item.name}</td>
                <td>${item.price.toFixed(2)}</td>
            `;
            tbody.appendChild(row);
            total += item.price;
        });
        if(cart.length > 0){
            const row = document.createElement("tr");
            row.innerHTML = `<td colspan="2"><strong>Total</strong></td><td><strong>${total.toFixed(2)}</strong></td>`;
            tbody.appendChild(row);
        }
    }

    // Checkout: clear cart
    function checkout() {
        if (cart.length === 0) {
            alert("Cart is empty!");
            return;
        }
        displayCart();
        alert("Checkout complete! Cart is now empty.");
        cart = [];
        displayCart();
    }

    // Initial load
    displayProducts();
    displayCart();
</script>

</body>
</html>
